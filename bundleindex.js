(()=>{var c=class{constructor(){this.nom="invit\xE9",this.rubis=0}},t={utilisateur:new c,io:"https://geniusjs.herokuapp.com",formouvert:!1,profilconnecte:!1};function l(e){e===!0?document.querySelector("form").style.display="none":e===!1&&(document.querySelector("form").style.display="flex")}function u(e){e.nom==="invit\xE9"?localStorage.getItem("nom")===null||localStorage.getItem("nom"):(t.utilisateur=e,localStorage.setItem("nom",e.nom),document.querySelector("#rubiscount").textContent=t.utilisateur.rubis,document.querySelector("form").style.display="none",t.formouvert=!1,t.profilconnecte=!0)}function s(e){let o=document.createElement("p");o.textContent=e,o.className="perror",document.querySelector("form").appendChild(o),n.timeursecondes(1,()=>{o.remove()})}var n=$;var a=io(t.io);onload=()=>{let e=document.querySelector("#blockcard"),o=e.clientWidth,r=e.clientHeight,i=e.getBoundingClientRect();e.addEventListener("mousemove",m=>{let p=(m.clientX-i.left)/o,d=(m.clientY-i.top)/r;document.documentElement.style.setProperty("--lightpositionX",100*p+"%"),document.documentElement.style.setProperty("--lightpositionY",100*d+"%")});let f=getComputedStyle(document.documentElement).getPropertyValue("--rouge");u(t.utilisateur)};n.event("#compteicon","click",()=>{t.profilconnecte===!0||(t.formouvert===!1?(l(t.formouvert),t.formouvert=!0):(l(t.formouvert),t.formouvert=!1))});n.event("#spanpass","click",()=>{document.querySelector("#inputpass").type==="text"?document.querySelector("#inputpass").type="password":document.querySelector("#inputpass").type="text"});n.event("#fermerform","click",()=>{l(t.formouvert),t.formouvert=!1});n.event("#connexionform","click",e=>{e.preventDefault();let o=document.querySelector("#inputname"),r=document.querySelector("#inputpass");if(o.value===""||r.value==="")s("Veuillez remplir tous les champs");else if(o.value==="invit\xE9")s("Choisissez un autre pseudo");else{let i={nom:o.value,pass:r.value};a.emit("connexionnetwork",i)}});a.on("reponseconnexionnetworkok",e=>{t.utilisateur=e,u(t.utilisateur),console.log(t.utilisateur),console.log("Reponse du genius serveur ok")});a.on("reponseconnexionnetworkerror",e=>{s("Pseudo ou mot de passe incorrect"),console.log("error")});})();
