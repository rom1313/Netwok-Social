(()=>{var s=class{constructor(){this.nom="invit\xE9",this.rubis=0}},e={utilisateur:new s,io:"https://geniusjs.herokuapp.com",formouvert:!1,profilconnecte:!1};function c(t){t===!0?document.querySelector("form").style.display="none":t===!1&&(document.querySelector("form").style.display="flex")}function u(t){t.nom==="invit\xE9"?localStorage.getItem("nom")===null||localStorage.getItem("nom"):(e.utilisateur=t,localStorage.setItem("nom",t.nom),document.querySelector("#rubiscount").textContent=e.utilisateur.rubis,document.querySelector("form").style.display="none",e.formouvert=!1,e.profilconnecte=!0)}function i(t){let o=document.createElement("p");o.textContent=t,o.className="perror",document.querySelector("form").appendChild(o),r.timeursecondes(1,()=>{o.remove()})}var r=$,a="home",l;var m=io(e.io);onload=()=>{u(e.utilisateur);let t=getComputedStyle(document.documentElement).getPropertyValue("--rouge")};r.event("#lihome","click",()=>{a==="home"||(document.querySelector("#blockcard").remove(),l.remove(),document.querySelector("main").innerHTML="",a="home")});r.event("#liarticles","click",()=>{fetch("./pages/test.html").then(t=>{t.text().then(o=>{let n=o;document.querySelector("main").innerHTML=n}),fetch("./pages/test.mjs").then(o=>o.text()).then(o=>{l=document.createElement("script"),l.innerHTML=o,document.querySelector("#blockcard").appendChild(l)}),a="articles"})});r.event("#compteicon","click",()=>{e.profilconnecte===!0||(e.formouvert===!1?(c(e.formouvert),e.formouvert=!0):(c(e.formouvert),e.formouvert=!1))});r.event("#spanpass","click",()=>{document.querySelector("#inputpass").type==="text"?document.querySelector("#inputpass").type="password":document.querySelector("#inputpass").type="text"});r.event("#fermerform","click",()=>{c(e.formouvert),e.formouvert=!1});r.event("#connexionform","click",t=>{t.preventDefault();let o=document.querySelector("#inputname"),n=document.querySelector("#inputpass");if(o.value===""||n.value==="")i("Veuillez remplir tous les champs");else if(o.value==="invit\xE9")i("Choisissez un autre pseudo");else{let p={nom:o.value,pass:n.value};m.emit("connexionnetwork",p)}});m.on("reponseconnexionnetworkok",t=>{e.utilisateur=t,u(e.utilisateur),console.log(e.utilisateur),console.log("Reponse du genius serveur ok")});m.on("reponseconnexionnetworkerror",t=>{i("Pseudo ou mot de passe incorrect"),console.log("error")});})();
