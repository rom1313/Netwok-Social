(()=>{var s=class{constructor(){this.nom="invit\xE9",this.rubis=0}},e={utilisateur:new s,io:"https://geniusjs.herokuapp.com",formouvert:!1,profilconnecte:!1};function n(t){t===!0?document.querySelector("form").style.display="none":t===!1&&(document.querySelector("form").style.display="flex")}function l(t){t.nom==="invit\xE9"?localStorage.getItem("nom")===null||localStorage.getItem("nom"):(e.utilisateur=t,localStorage.setItem("nom",t.nom),document.querySelector("#rubiscount").textContent=e.utilisateur.rubis,document.querySelector("form").style.display="none",e.formouvert=!1,e.profilconnecte=!0)}function i(t){let o=document.createElement("p");o.textContent=t,o.className="perror",document.querySelector("form").appendChild(o),r.timeursecondes(1,()=>{o.remove()})}var r=$;var u=io(e.io);onload=()=>{console.table(e.utilisateur),l(e.utilisateur),console.table(e.utilisateur)};r.salaireSMIC(24,"net","log");r.event("#compteicon","click",()=>{e.profilconnecte===!0||(e.formouvert===!1?(n(e.formouvert),e.formouvert=!0):(n(e.formouvert),e.formouvert=!1))});r.event("#spanpass","click",()=>{document.querySelector("#inputpass").type==="text"?document.querySelector("#inputpass").type="password":document.querySelector("#inputpass").type="text"});r.event("#fermerform","click",()=>{n(e.formouvert),e.formouvert=!1});r.event("#connexionform","click",t=>{t.preventDefault();let o=document.querySelector("#inputname"),c=document.querySelector("#inputpass");if(o.value===""||c.value==="")i("Veuillez remplir tous les champs");else if(o.value==="invit\xE9")i("Choisissez un autre pseudo");else{let a={nom:o.value,pass:c.value};u.emit("connexionnetwork",a)}});u.on("reponseconnexionnetworkok",t=>{e.utilisateur=t,l(e.utilisateur),console.log(e.utilisateur),console.log("Reponse du genius serveur ok")});u.on("reponseconnexionnetworkerror",t=>{i("Pseudo ou mot de passe incorrect"),console.log("error")});})();
